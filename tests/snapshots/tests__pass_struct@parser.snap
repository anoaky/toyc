---
source: tests/tests.rs
expression: ast
snapshot_kind: text
---
[
  StructTypeDecl(Struct("foo"), "foo", [
    VarDecl(Int, "a", None),
    VarDecl(Int, "b", None),
  ]),
  FunDefn(
    decl: FunDecl(Struct("foo"), "swap", [
      VarDecl(Struct("foo"), "inp", None),
    ]),
    block: Block(
      stmts: [
        Decl(VarDecl(Int, "tmp", None)),
        ExprStmt(Assign(VarExpr("tmp"), FieldAccessExpr(VarExpr("inp"), "a"))),
        ExprStmt(Assign(FieldAccessExpr(VarExpr("inp"), "a"), FieldAccessExpr(VarExpr("inp"), "b"))),
        ExprStmt(Assign(FieldAccessExpr(VarExpr("inp"), "b"), VarExpr("tmp"))),
        Return(Some(VarExpr("inp"))),
      ],
    ),
  ),
  FunDefn(
    decl: FunDecl(Void, "main", []),
    block: Block(
      stmts: [
        Decl(VarDecl(Struct("foo"), "bar", None)),
        ExprStmt(Assign(FieldAccessExpr(VarExpr("bar"), "a"), Literal(Int(55)))),
        ExprStmt(Assign(FieldAccessExpr(VarExpr("bar"), "b"), Literal(Int(66)))),
        ExprStmt(Assign(VarExpr("bar"), FunCallExpr(VarExpr("swap"), [
          VarExpr("bar"),
        ]))),
        ExprStmt(FunCallExpr(VarExpr("print_i"), [
          FieldAccessExpr(VarExpr("bar"), "a"),
        ])),
      ],
    ),
  ),
]
