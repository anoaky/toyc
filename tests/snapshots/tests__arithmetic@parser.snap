---
source: tests/tests.rs
expression: ast
snapshot_kind: text
---
[
  VarDecl(Int, "test_num", None),
  VarDecl(Int, "correct", None),
  FunDefn(
    decl: FunDecl(Void, "atest", [
      VarDecl(Int, "exp", None),
      VarDecl(Int, "act", None),
    ]),
    block: Block(
      stmts: [
        If(
          expr: BinOp(VarExpr("exp"), Eq, VarExpr("act")),
          then: Block(
            stmts: [
              ExprStmt(Assign(VarExpr("correct"), BinOp(VarExpr("correct"), Add, Literal(Int(1))))),
            ],
          ),
          els: Some(Block(
            stmts: [
              ExprStmt(FunCallExpr(VarExpr("print_s"), [
                TypecastExpr(Pointer(Char), Literal(Str("TEST "))),
              ])),
              ExprStmt(FunCallExpr(VarExpr("print_i"), [
                VarExpr("test_num"),
              ])),
              ExprStmt(FunCallExpr(VarExpr("print_s"), [
                TypecastExpr(Pointer(Char), Literal(Str(" FAIL "))),
              ])),
              ExprStmt(FunCallExpr(VarExpr("print_i"), [
                VarExpr("exp"),
              ])),
              ExprStmt(FunCallExpr(VarExpr("print_s"), [
                TypecastExpr(Pointer(Char), Literal(Str(" != "))),
              ])),
              ExprStmt(FunCallExpr(VarExpr("print_i"), [
                VarExpr("act"),
              ])),
              ExprStmt(FunCallExpr(VarExpr("print_c"), [
                Literal(Char('n')),
              ])),
            ],
          )),
        ),
        ExprStmt(Assign(VarExpr("test_num"), BinOp(VarExpr("test_num"), Add, Literal(Int(1))))),
      ],
    ),
  ),
  FunDefn(
    decl: FunDecl(Void, "main", []),
    block: Block(
      stmts: [
        Decl(VarDecl(Int, "x", None)),
        Decl(VarDecl(Int, "y", None)),
        Decl(VarDecl(Int, "z", None)),
        ExprStmt(Assign(VarExpr("test_num"), Literal(Int(0)))),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(1)), Add, Literal(Int(1))),
          Literal(Int(2)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(34)), Mul, Literal(Int(4))),
          Literal(Int(136)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(0)), Sub, BinOp(Literal(Int(0)), Sub, Literal(Int(500)))),
          Literal(Int(500)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(667)), Add, BinOp(BinOp(BinOp(BinOp(Literal(Int(4)), Mul, Literal(Int(4))), Mul, Literal(Int(33))), Div, Literal(Int(6))), Mod, Literal(Int(7)))),
          Literal(Int(671)),
        ])),
        ExprStmt(Assign(VarExpr("x"), BinOp(Literal(Int(0)), Sub, Literal(Int(34))))),
        ExprStmt(Assign(VarExpr("y"), BinOp(Literal(Int(0)), Sub, Literal(Int(4))))),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(VarExpr("x"), Mul, VarExpr("y")),
          Literal(Int(136)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(BinOp(BinOp(VarExpr("x"), Mul, Literal(Int(5))), Add, BinOp(VarExpr("y"), Mul, Literal(Int(5)))), Sub, Literal(Int(44))),
          BinOp(Literal(Int(0)), Sub, Literal(Int(234))),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(13)), Div, Literal(Int(3))),
          Literal(Int(4)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(77)), Mod, Literal(Int(44))),
          Literal(Int(33)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(BinOp(Literal(Int(0)), Sub, Literal(Int(13))), Div, Literal(Int(3))),
          BinOp(Literal(Int(0)), Sub, Literal(Int(4))),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(BinOp(BinOp(BinOp(Literal(Int(0)), Sub, Literal(Int(13))), Div, Literal(Int(3))), Mul, Literal(Int(3))), Add, BinOp(BinOp(Literal(Int(0)), Sub, Literal(Int(13))), Mod, Literal(Int(3)))),
          BinOp(Literal(Int(0)), Sub, Literal(Int(13))),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(BinOp(Literal(Int(55)), Mul, Literal(Int(34))), Add, BinOp(BinOp(Literal(Int(0)), Sub, VarExpr("x")), Mod, Literal(Int(4)))),
          Literal(Int(1872)),
        ])),
        ExprStmt(FunCallExpr(VarExpr("atest"), [
          BinOp(Literal(Int(1537983633)), Mul, Literal(Int(2))),
          BinOp(Literal(Int(0)), Sub, Literal(Int(1219000030))),
        ])),
        If(
          expr: BinOp(VarExpr("correct"), Eq, VarExpr("test_num")),
          then: Block(
            stmts: [
              ExprStmt(FunCallExpr(VarExpr("print_s"), [
                TypecastExpr(Pointer(Char), Literal(Str("ALL PASS"))),
              ])),
            ],
          ),
          els: None,
        ),
      ],
    ),
  ),
]
